INCLUDE(GetPrerequisites)

FOREACH(LOCATION @OVERVIEW_BINARY_LOCATIONS@)
  MESSAGE(STATUS "LOCATION: ${LOCATION}")
  
  GET_PREREQUISITES(${LOCATION} DEPENDENCIES 1 1 "" "")

  FOREACH(DEPENDENCY ${DEPENDENCIES})
    GET_FILENAME_COMPONENT(DEPENDENCY_NAME "${DEPENDENCY}" NAME)
    GET_FILENAME_COMPONENT(DEPENDENCY_ACTUAL "${DEPENDENCY}" REALPATH)

    # This is an ugly hack.  On OSX, the Qt libraries show up as relative paths
    # beginning with the name of the framework.
    IF(APPLE)
      IF(NOT IS_ABSOLUTE ${DEPENDENCY}) 
        SET(DEPENDENCY_ACTUAL "/Library/Frameworks/${DEPENDENCY}")
      ENDIF()
    ENDIF()

    MESSAGE(STATUS "INSTALLING: ${DEPENDENCY} -> ${DEPENDENCY_ACTUAL}")
    FILE(INSTALL
      DESTINATION "${CMAKE_INSTALL_PREFIX}/lib"
      TYPE EXECUTABLE
      RENAME "${DEPENDENCY_NAME}"
      FILES "${DEPENDENCY_ACTUAL}"
      )
  ENDFOREACH()
ENDFOREACH()

