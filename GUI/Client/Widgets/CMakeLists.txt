PROJECT(pqWidgets)

IF(PARAQ_EMBED_PYTHON)
  FIND_PACKAGE(PythonLibs)

  SET(PYTHON_LINK_LIBRARIES
    pqPython
    QtPython
    vtkPVServerCommonPythonD
    vtkPVServerManagerPythonD
    ${PYTHON_LIBRARIES}
  )
ENDIF(PARAQ_EMBED_PYTHON)

INCLUDE_DIRECTORIES(
  ${QtPython_BINARY_DIR}
  ${QtPython_SOURCE_DIR}
  ${pqWidgets_BINARY_DIR}
  ${pqWidgets_SOURCE_DIR}
)

# Reduce the number of dirs that get included on moc command line
# since it causes issues on Windows 2000.
GET_DIRECTORY_PROPERTY(include_dirs_tmp INCLUDE_DIRECTORIES)
SET_DIRECTORY_PROPERTIES(PROPERTIES INCLUDE_DIRECTORIES "${MOC_INCLUDE_DIRS}")

QT4_WRAP_CPP(MOC_BUILT_SOURCES
  pq3DWidgetFactory.h
  pqAddSourceDialog.h
  pqApplicationCore.h
  pqAutoGeneratedObjectPanel.h
  pqClipPanel.h
  pqComboBoxDomain.h
  pqCompoundProxyWizard.h
  pqCutPanel.h
  pqDataInformationModel.h
  pqDataInformationModelSelectionAdaptor.h
  pqDataInformationWidget.h
  pqDataSetModel.h
  pqDisplayProxyEditor.h
  pqDoubleSpinBoxDomain.h
  pqElementInspectorWidget.h
  pqExodusPanel.h
  pqFileDialogEventTranslator.h
  pqImageTip.h
  pqImplicitPlaneWidget.h
  pqLoadedFormObjectPanel.h
  pqMainWindow.h
  pqMultiViewFrame.h
  pqMultiView.h
  pqNamedObjectPanel.h
  pqObjectInspectorWidget.h
  pqObjectPanel.h
  pqOutputWindowAdapter.h
  pqOutputWindow.h
  pqPicking.h
  pqPipelineBrowserContextMenu.h
  pqPipelineBrowser.h
  pqPipelineBuilder.h
  pqPipelineMenu.h
  pqPipelineModel.h
  pqPipelineModelSelectionAdaptor.h
  pqPipelineSource.h
  pqPropertyLinks.h
  pqPropertyManager.h
  pqRenderModule.h
  pqRenderViewEditor.h
  pqRenderWindowManager.h
  pqSelectionAdaptor.h
  pqServer.h
  pqServerBrowser.h
  pqServerFileDialogModel.h
  pqServerManagerModel.h
  pqServerManagerModelItem.h
  pqServerManagerObserver.h
  pqServerManagerSelectionModel.h
  pqSliderDomain.h
  pqSMSignalAdaptors.h
  pqSourceInfoGroupMap.h
  pqSourceInfoIcons.h
  pqSourceInfoModel.h
  pqThresholdPanel.h
  pqUndoStack.h
  pqVariableSelectorWidget.h
  pqVCRController.h
  pqWidgetObjectPanel.h
)
SET_DIRECTORY_PROPERTIES(PROPERTIES INCLUDE_DIRECTORIES "${include_dirs_tmp}")

SET(UI_FORMS
  pqAddSourceDialog.ui
  pqCompoundProxyWizard.ui
  pqDisplayProxyEditor.ui
  pqImplicitPlaneWidget.ui
  pqMultiViewFrameMenu.ui
  pqOutputWindow.ui
  pqRenderViewEditor.ui
  pqServerBrowser.ui
)

QT4_WRAP_UI(UI_BUILT_SOURCES
  ${UI_FORMS}
)

SET(UI_RESOURCES
  pqWidgets.qrc
)

QT4_ADD_RESOURCES(RCS_SOURCES
  ${UI_RESOURCES}
)


SOURCE_GROUP("Resources" FILES
  ${UI_RESOURCES}
  ${UI_FORMS}
)

SOURCE_GROUP("Generated" FILES
  ${MOC_BUILT_SOURCES}
  ${RCS_SOURCES}
  ${UI_BUILT_SOURCES}
)

ADD_LIBRARY(pqWidgets
  pq3DWidgetFactory.cxx
  pq3DWidgetFactory.h
  pqAddSourceDialog.cxx
  pqAddSourceDialog.h
  pqApplicationCore.cxx
  pqApplicationCore.h
  pqAutoGeneratedObjectPanel.cxx
  pqAutoGeneratedObjectPanel.h
  pqClipPanel.cxx
  pqClipPanel.h
  pqComboBoxDomain.cxx
  pqComboBoxDomain.h
  pqCompoundProxyWizard.cxx
  pqCompoundProxyWizard.h
  pqCutPanel.cxx
  pqCutPanel.h
  pqDataInformationModel.cxx
  pqDataInformationModel.h
  pqDataInformationModelSelectionAdaptor.cxx
  pqDataInformationModelSelectionAdaptor.h
  pqDataInformationWidget.cxx
  pqDataInformationWidget.h
  pqDataSetModel.cxx
  pqDataSetModel.h
  pqDisplayProxyEditor.cxx
  pqDisplayProxyEditor.h
  pqDoubleSpinBoxDomain.cxx
  pqDoubleSpinBoxDomain.h
  pqElementInspectorWidget.cxx
  pqElementInspectorWidget.h
  pqExodusPanel.cxx
  pqExodusPanel.h
  pqFileDialogEventPlayer.cxx
  pqFileDialogEventPlayer.h
  pqFileDialogEventTranslator.cxx
  pqFileDialogEventTranslator.h
  pqImageTip.cxx
  pqImageTip.h
  pqImplicitPlaneWidget.cxx
  pqImplicitPlaneWidget.h
  pqLoadedFormObjectPanel.cxx
  pqLoadedFormObjectPanel.h
  pqMain.cxx
  pqMain.h
  pqMainWindow.cxx
  pqMainWindow.h
  pqMultiView.cxx
  pqMultiView.h
  pqMultiViewFrame.cxx
  pqMultiViewFrame.h
  pqNameCount.cxx
  pqNameCount.h
  pqNamedObjectPanel.cxx
  pqNamedObjectPanel.h
  pqObjectPanel.cxx
  pqObjectPanel.h
  pqObjectInspectorWidget.cxx
  pqObjectInspectorWidget.h
  pqOptions.cxx
  pqOptions.h
  pqOutputWindow.cxx
  pqOutputWindow.h
  pqOutputWindowAdapter.cxx
  pqOutputWindowAdapter.h
  pqParts.cxx
  pqParts.h
  pqPicking.cxx
  pqPicking.h
  pqPipelineBrowserContextMenu.cxx
  pqPipelineBrowserContextMenu.h
  pqPipelineBrowser.cxx
  pqPipelineBrowser.h
  pqPipelineBuilder.cxx
  pqPipelineBuilder.h
  pqPipelineDisplay.cxx
  pqPipelineDisplay.h
  pqPipelineFilter.cxx
  pqPipelineFilter.h
  pqPipelineMenu.cxx
  pqPipelineMenu.h
  pqPipelineModel.cxx
  pqPipelineModel.h
  pqPipelineModelSelectionAdaptor.cxx
  pqPipelineModelSelectionAdaptor.h
  pqPipelineSource.cxx
  pqPipelineSource.h
  pqProcessModuleGUIHelper.cxx
  pqProcessModuleGUIHelper.h
  pqPropertyLinks.cxx
  pqPropertyLinks.h
  pqPropertyManager.cxx
  pqPropertyManager.h
  pqProxy.cxx
  pqProxy.h
  pqReaderFactory.cxx
  pqReaderFactory.h
  pqRenderModule.cxx
  pqRenderModule.h
  pqRenderViewEditor.cxx
  pqRenderViewEditor.h
  pqRenderViewProxy.cxx
  pqRenderViewProxy.h
  pqRenderWindowManager.cxx
  pqRenderWindowManager.h
  pqSelectionAdaptor.cxx
  pqSelectionAdaptor.h
  pqServerBrowser.cxx
  pqServerBrowser.h
  pqServer.cxx
  pqServer.h
  pqServerFileDialogModel.cxx
  pqServerFileDialogModel.h
  pqServerManagerModel.cxx
  pqServerManagerModel.h
  pqServerManagerModelItem.cxx
  pqServerManagerModelItem.h
  pqServerManagerObserver.cxx
  pqServerManagerObserver.h
  pqServerManagerSelectionModel.cxx
  pqServerManagerSelectionModel.h
  pqSMAdaptor.cxx
  pqSMAdaptor.h
  pqSMProxy.cxx
  pqSMProxy.h
  pqSMSignalAdaptors.cxx
  pqSMSignalAdaptors.h
  pqSliderDomain.cxx
  pqSliderDomain.h
  pqSourceHistoryModel.cxx
  pqSourceHistoryModel.h
  pqSourceInfoGroupMap.cxx
  pqSourceInfoGroupMap.h
  pqSourceInfoIcons.cxx
  pqSourceInfoIcons.h
  pqSourceInfoModel.cxx
  pqSourceInfoModel.h
  pqSourceProxyInfo.cxx
  pqSourceProxyInfo.h
  pqTestUtility.cxx
  pqTestUtility.h
  pqThresholdPanel.cxx
  pqThresholdPanel.h
  pqUndoStack.cxx
  pqUndoStack.h
  pqVariableSelectorWidget.cxx
  pqVariableSelectorWidget.h
  pqVariableType.h
  pqVCRController.cxx
  pqVCRController.h
  pqWidgetObjectPanel.cxx
  pqWidgetObjectPanel.h
  pqWidgetsExport.h
  pqWriterFactory.h
  pqWriterFactory.cxx
  pqXMLUtil.cxx
  pqXMLUtil.h
  ${MOC_BUILT_SOURCES}
  ${RCS_SOURCES}
  ${UI_BUILT_SOURCES}

  vtkPVAxesWidget.cxx
  vtkPVAxesWidget.h
  vtkPVAxesActor.cxx
  vtkPVAxesActor.h
)

TARGET_LINK_LIBRARIES(pqWidgets
  QtChart
  QtTesting
  QtWidgets
  vtkPVServerManager
  QVTK
  ${PYTHON_LINK_LIBRARIES}
)

IF(BUILD_TESTING)
  SUBDIRS(Testing)
ENDIF(BUILD_TESTING)

